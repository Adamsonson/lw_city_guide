<div class="city-spots">
  <div class="city-spots__header" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)), url('<%= image_path "#{@city.name.downcase}.jpeg" %>')">
    <h1><%= @city.name %></h1>
    <p><%= @city.country %><p>
  </div>
  <% if @city.spots.blank? %>
    <p><%= "Oh, oops! No places for #{@city.name} added yet! ğŸ’©" %></p>
    <%= link_to "Back to all cities", root_path %>
  <% else %>
    <%= render "shared/categories" %>
    <div class="main-container">
      <!--<span class="city-spots__category">Eat Â· <%= pluralize @spots.size, "spot" %></span>-->
      <% @spots.each do |spot| %>
        <%= link_to spot_path(spot), class: "card-wrap" do %>
          <div class="card-spot spacer-xs" data-spot-id="<%= spot.id %>">
            <%= image_tag "#{@city.name.downcase}.jpeg", class: "card-spot__photo" %>
            <%# cl_image_tag "city_guide/barcelona", class: "card-spot__photo" %>
            <div class="card-spot__text">
              <p class="card-spot__category"><%= spot.category.name %></p>
              <p class="card-spot__sub-category"><%= spot.sub_category %></p>
              <h2 class="card-spot__name"><%= spot.name %></h2>
              <% if user_signed_in? %>
                <% if policy(spot).destroy? %>
                  <%= link_to :delete, spot_path(spot), method: :delete, data: { confirm: "Are you sure you want to delete #{spot.name}?", remote: true } %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
    <%= render "shared/map" %>
  <% end %>
</div>
